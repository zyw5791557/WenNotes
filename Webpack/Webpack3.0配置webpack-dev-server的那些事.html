<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Webpack3.0配置webpack-dev-server的那些事</title>
<!--defaultCSS-->
</head>

<body>
<div id="WizHtmlContentId">

<!--WizHtmlContentBegin--><div>-&nbsp;<a href="http://www.cnblogs.com/caideyipi/articles/7080010.html">http://www.cnblogs.com/caideyipi/articles/7080010.html</a>&nbsp;&nbsp;</div><div><br></div><div><h1 class="postTitle" style="margin-top: 0px; margin-bottom: 0px; font-size: 1.5em; line-height: 1.5em; width: 725px; clear: both; text-align: center; font-family: tahoma, arial, sans-serif; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/caideyipi/p/7080010.html" style="margin: 0px; padding: 0px; color: rgb(46, 177, 232); text-decoration: none; font-size: 1.5em; text-shadow: rgb(167, 168, 173) 0px 0px 1px; line-height: 1.5em;">webpack-dev-server配置指南（使用webpack3.0）</a></h1><div class="clear" style="padding: 0px; clear: both; font-family: tahoma, arial, sans-serif; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"></div><div class="postBody" style="padding: 5px; line-height: 1.5; color: rgb(68, 68, 68); font-family: tahoma, arial, sans-serif; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"><div id="cnblogs_post_body" style="margin-bottom: 20px; padding: 0px; word-break: break-word;"><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; font-family: &quot;Microsoft YaHei&quot;;">最近正在研究webpack，听说webpack可以自己搭建一个小型的服务器（使用过vue-cli的朋友应该都见识到过），所以迫不及待的想要尝试一下。不过，在实际操作中发现，用webpack搭建服务器仍有不少坑，一方面是由于自己对文档的不熟悉，不了解webpack-dev-server的运作模式；另一方面，在翻阅了不少博客和文章后，发现不少配置实际上都跑不起来（有可能是版本的原因，也有可能是我自己配置的原因）。所以我打算用webpack3.0把dev-server跑起来给大家演示一遍，顺便把一些配置和原理给大家讲清楚，这样就省的绕弯路了。</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; font-family: &quot;Microsoft YaHei&quot;;">　　</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-size: 15px; font-family: &quot;Microsoft YaHei&quot;;">这里我就默认大家都已经安装了webpack以及自己需要使用的loader和plugins，由于webpack-dev-server是个独立的npm包，所以我们需要在npm下安装它：</span><span style="margin: 0px; padding: 0px; font-size: 15px; font-family: &quot;Microsoft YaHei&quot;;">　</span></p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important; background-color: rgb(245, 245, 245);"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;">npm <span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">install</span> webpack-dev-server --save-dev</pre></div><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;">&nbsp;</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">之后我们就可以在webpack.config.js中进行配置：</span></p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important; background-color: rgb(245, 245, 245);"><div class="cnblogs_code_toolbar" style="margin-top: 5px; padding: 0px; line-height: 1.5 !important;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); text-decoration: underline; border: none !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.45413023712552114.png" alt="复制代码" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px; border-style: none !important; border-width: initial !important;"></a></span></div><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;">const path = require("path");<br style="margin: 0px; padding: 0px;">module.exports =<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;"> {
     entyr:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">设置入口文件</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     output:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">设置出口文件</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     module:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">配置loader，注意使用rules而不是loaders</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     plugins:[
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">注意是数组</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     ],
     devServer:{
           </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">我们在这里对webpack-dev-server进行配置</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     }                
}</span></pre><div class="cnblogs_code_toolbar" style="margin-top: 5px; padding: 0px; line-height: 1.5 !important;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); text-decoration: underline; border: none !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.968707649058349.png" alt="复制代码" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px; border-style: none !important; border-width: initial !important;"></a></span></div></div><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;"><strong style="margin: 0px; padding: 0px;">devServer中常用的配置对象属性如下：</strong></span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">1. contentBase："./" // 本地服务器在哪个目录搭建页面，一般我们在当前目录即可；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">2. historyApiFallback：true // 当我们搭建spa应用时非常有用，它使用的是<span style="margin: 0px; padding: 0px; color: rgb(0, 204, 255);"><strong style="margin: 0px; padding: 0px;">HTML5 History Api</strong></span>，任意的跳转或404响应可以指向 index.html&nbsp;页面；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">3. inline：true // 用来支持dev-server自动刷新的配置，webpack有两种模式支持自动刷新，一种是iframe模式，一种是inline模式；使用iframe模式是不需要在devServer进行配置的，只需使用特定的URL格式访问即可；不过我们一般还是常用inline模式，在devServer中对inline设置为true后，<span style="margin: 0px; padding: 0px; color: rgb(255, 0, 0);">当我们启动webpack-dev-server时仍要需要配置inline才能生效</span>，这一点我们之后再说；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">4. hot：true // 启动webpack热模块替换特性，这里也是坑最多的地方，不少博客都将hot设置了true，我们姑且也设置为true，之后再看；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">5. port：端口号(默认8080) // 这就不用我多说了吧；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">事实上大概常用的配置也就这样，为了方便，我们在packjson中对webpack-dev-server的的启动进行一下设置：</span></p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important; background-color: rgb(245, 245, 245);"><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;">"scripts"<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">: {
    ......
    ......
    </span>"start":"webpack-dev-server --inline"<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">
  },</span></pre></div><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px; color: rgb(255, 0, 0);">别忘了在devServer中设置inline：true后这里也要设置一下！</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">这时我们打包后再运行服务器后应该发现index.html页面已经展示了，打包好后的js文件虽然出现在了src上，但并没有显示，打开控制台会发现如下报错：</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.9235004814187193.png" alt="" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px;"></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; color: rgb(255, 0, 0); font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">控制台显示：Hot Module Replacement is disabled；</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">奇怪？我们之前不是在devServer中设置了hot为true了吗？事实上，虽然不知道为什么，但是目前来说hot这个属性已经没有用了，使用热模块的话我们需要用到一个叫webpack.HotModuleReplacementPlugin的插件。所以我们的webpack.config.js需要加上这些：</span></p><div class="cnblogs_code" style="margin-top: 5px; margin-bottom: 5px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; color: rgb(0, 0, 0); font-family: 'Courier New' !important; line-height: 1.5 !important; background-color: rgb(245, 245, 245);"><div class="cnblogs_code_toolbar" style="margin-top: 5px; padding: 0px; line-height: 1.5 !important;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); text-decoration: underline; border: none !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.1705843283716315.png" alt="复制代码" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px; border-style: none !important; border-width: initial !important;"></a></span></div><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Courier New' !important;">const path = require("path"<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">);
const webpack </span>= requier ("webpack"<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">);

module.exports </span>=<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;"> {
     entyr:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">设置入口文件</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     output:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">设置出口文件</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     module:{
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">配置loader，注意使用rules而不是loaders</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     },
     plugins:[
          </span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">new</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;"> webpack.HotModuleReplacementPlugin()
           .......  </span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">//</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0); line-height: 1.5 !important;">注意是数组</span>
<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">     ],
     devServer:{
          contentBase: </span>"./"<span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">, 
      historyApiFallback:</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">true</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">,
      inline:</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">true</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">,
      hot:</span><span style="margin: 0px; padding: 0px; color: rgb(0, 0, 255); line-height: 1.5 !important;">true</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">
     }                
}</span></pre><div class="cnblogs_code_toolbar" style="margin-top: 5px; padding: 0px; line-height: 1.5 !important;"><span class="cnblogs_code_copy" style="margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.5 !important;"><a title="复制代码" style="margin: 0px; padding: 0px; color: rgb(68, 68, 68); text-decoration: underline; border: none !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.7982650217693856.png" alt="复制代码" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px; border-style: none !important; border-width: initial !important;"></a></span></div></div><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;">&nbsp;<span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">这时我们再在bash上运行npm run start后发现服务器就搭建完成了！</span></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><img src="Webpack3.0配置webpack-dev-server的那些事_files/0.6909597398766525.png" alt="" style="margin-top: 0px; margin-bottom: 0px; padding: 0px; max-width: 660px;"></p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;">&nbsp;</p><p style="margin: 10px auto; padding: 0px; line-height: 1.5 !important;"><span style="margin: 0px; padding: 0px; font-family: &quot;Microsoft YaHei&quot;; font-size: 15px;">另外，还有一点值得注意的就是，webpack-dev-server所使用的bundle.js文件并不是webpack.config.js中output打包生成的bundle.js，而是使用webpack-dev-server自己打包生成的，这个文件不存在与output或其他路径中，而是存到了内存中，事实上webpack-dev-server所使用的那个bundle.js我们是看不到的！</span></p></div></div></div><!--WizHtmlContentEnd-->

</div>
</body>

</html>