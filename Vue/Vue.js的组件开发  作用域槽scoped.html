<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Vue.js的组件开发  作用域槽scoped</title>
<!--defaultCSS-->
</head>

<body>
<div id="WizHtmlContentId">

<!--WizHtmlContentBegin--><div>-&nbsp;<a href="http://blog.csdn.net/oak160/article/details/65447195">http://blog.csdn.net/oak160/article/details/65447195</a>&nbsp; &nbsp;</div><div><br></div><div><br></div><div><span class="ico ico_type_Original" style="display: inline-block; vertical-align: middle; width: 19px; height: 19px; margin-right: 10px; font-family: 'microsoft yahei'; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-image: url(&quot;&quot;); background-color: rgb(255, 255, 255); background-position: 0px 0px; background-repeat: no-repeat;"></span><span style="font-family: 'microsoft yahei'; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">&nbsp;</span><h1 style="margin-top: 0px; margin-bottom: 0px; display: inline-block; vertical-align: middle; font-size: 18px; font-family: 'microsoft yahei'; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"><span class="link_title"><a href="http://blog.csdn.net/oak160/article/details/65447195" style="text-decoration: none; color: rgb(0, 0, 0);">Vue.js的组件（七）分发 之 作用域槽</a></span></h1><div><br></div><div><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">首先，需要知道的是，每个组件有每个组件自己的作用域。每个组件都是Vue()的实例，有自己的作用域。&nbsp;<br style="box-sizing: border-box;">比如现在有个组件这样的：</p><pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs scilab has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-transposed_variable" style="box-sizing: border-box;">Vue.</span>component(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'father-component1'</span>,{
   template:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;div class="</span>father<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"&gt;&lt;p&gt;Hi,我是父组件&lt;/p&gt;{{fatherMessage}}&lt;/div&gt;'</span>,
    data:<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">function</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">()</span>{</span>
      <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span>  {
          fatherMessage:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'这是父组件发出的消息哦~'</span>
      }
    },
});</code><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; opacity: 0; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li></ul></pre><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">这个data只为template里的模板服务。同样的，子组件的data只为子组件的模板服务。因为他们都是各自作用域内的属性。</p><hr style="box-sizing: border-box; margin: 2em 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-right-style: initial; border-bottom-style: initial; border-left-style: initial; border-right-color: initial; border-bottom-color: initial; border-left-color: initial; border-image-source: initial; border-image-slice: initial; border-image-width: initial; border-image-outset: initial; border-image-repeat: initial; border-top-style: solid; border-top-color: rgba(128, 128, 128, 0.0980392); color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">在slot分发中，无论是单分发还是具名分发，都是父组件替换子组件的数据，或者没有替换，用子组件默认的数据。两者并不能共存。这样他们就没有数据联系了。&nbsp;<br style="box-sizing: border-box;">但是通过设置作用域槽，就可以改变这种状况，让子组件可以在父组件进行分发时获取自己的数据，至于是什么数据，由子组件决定，这样就能解耦了。</p><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">作用域槽通过slot的一个自定义的属性，官方给出的DEMO是text，但也可以是其他，值为暴露的数据。&nbsp;<br style="box-sizing: border-box;">这个自定义属性已经存放在子组件的prop对象里了。等待着被父组件获取。</p><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">怎么获取呢？&nbsp;<br style="box-sizing: border-box;">在父组件的模板里，使用一个Vue自带的特殊组件<code style="box-sizing: border-box; font-family: &quot;Source Code Pro&quot;, monospace; padding: 2px 4px; font-size: 12.6px; color: rgb(63, 63, 63); background-color: rgba(128, 128, 128, 0.075); white-space: nowrap; border-radius: 0px;">&lt;template&gt;</code>&nbsp;，并在该组件上使用scope属性，值是一个临时的变量，存着的是由子组件传过来的prop对象，在下面的例子中我把他命名为props。</p><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">获得由子传过来的prop对象。这时候，父组件就可以访问子组件在自定义属性上暴露的数据了。</p><pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs scilab has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">//js</span>
<span class="hljs-transposed_variable" style="box-sizing: border-box;">Vue.</span>component(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'child-component4'</span>,{
   template:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;ul&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;slot name="</span>child-ul<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">" v-for="</span>item in fruit<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">" v-bind:text="</span><span class="hljs-transposed_variable" style="box-sizing: border-box;">item.</span>name<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"&gt;?&lt;/slot&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;/ul&gt;'</span>,
    data:<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">function</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">()</span>{</span>
      <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> {
          fruit:<span class="hljs-matrix" style="box-sizing: border-box;">[
              {name:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'苹果'</span>},
              {name:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'香蕉'</span>},
              {name:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'橙子'</span>}
          ]</span>
      }
    },
});
<span class="hljs-transposed_variable" style="box-sizing: border-box;">Vue.</span>component(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'father-component4'</span>,{
   template:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;child-component4&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;template scope="</span>props<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">" slot="</span>child-ul<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;li class="</span>child-li<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">" &gt;{{props.text}}&lt;/li&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;/template&gt;'</span> +
   <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'&lt;/child-component4&gt;'</span>
});
var app16 = new Vue({
    el:<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'#app16'</span>
});
&lt;div id=<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"app16"</span>&gt;
    &lt;father-component4&gt;&lt;/father-component4&gt;
&lt;/div&gt;</code><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; opacity: 0; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li></ul><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li></ul></pre><p style="margin-bottom: 1.1em; padding: 0px; box-sizing: border-box; color: rgb(85, 85, 85); font-family: 'microsoft yahei'; font-size: 14px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">以上的的组件组合会被渲染为：</p><pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 0px solid rgb(136, 136, 136); border-radius: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs xml has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace; font-size: inherit; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">div</span> <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 0, 102);">id</span>=<span class="hljs-value" style="box-sizing: border-box; color: rgb(0, 136, 0);">"app16"</span>&gt;</span>
<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">ul</span>&gt;</span>
    <span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span> <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 0, 102);">class</span>=<span class="hljs-value" style="box-sizing: border-box; color: rgb(0, 136, 0);">"child-li"</span>&gt;</span>苹果<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span>&gt;</span>
    <span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span> <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 0, 102);">class</span>=<span class="hljs-value" style="box-sizing: border-box; color: rgb(0, 136, 0);">"child-li"</span>&gt;</span>香蕉<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span>&gt;</span>
    <span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span> <span class="hljs-attribute" style="box-sizing: border-box; color: rgb(102, 0, 102);">class</span>=<span class="hljs-value" style="box-sizing: border-box; color: rgb(0, 136, 0);">"child-li"</span>&gt;</span>橙子<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">li</span>&gt;</span>
<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">ul</span>&gt;</span>
<span class="hljs-tag" style="color: rgb(0, 102, 102); box-sizing: border-box;">&lt;/<span class="hljs-title" style="box-sizing: border-box; color: rgb(0, 0, 136);">div</span>&gt;</span></code></pre></div><br></div><!--WizHtmlContentEnd-->

</div>
</body>

</html>