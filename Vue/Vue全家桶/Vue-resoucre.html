<!DOCTYPE HTML><html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<title>Vue-resoucre</title>
    <!--mark |wiz_custom_css| for wizeditor replace it-->
<style id="wiz_custom_css">html, body {            font-size: 15px;        }        body {            font-family: Helvetica, 'Hiragino Sans GB', '微软雅黑', 'Microsoft YaHei UI', SimSun, SimHei, arial, sans-serif;            line-height: 1.6;            margin: 0;            padding: 20px 15px;            padding: 1.33rem 1rem;        }        h1, h2, h3, h4, h5, h6 {            margin: 20px 0 10px;            margin: 1.33rem 0 0.667rem;            padding: 0;            font-weight: bold;        }        h1 {            font-size: 21px;            font-size: 1.4rem;        }        h2 {            font-size: 20px;            font-size: 1.33rem;        }        h3 {            font-size: 18px;            font-size: 1.2rem;        }        h4 {            font-size: 17px;            font-size: 1.13rem;        }        h5 {            font-size: 15px;            font-size: 1rem;        }        h6 {            font-size: 15px;            font-size: 1rem;            color: #777777;            margin: 1rem 0;        }        div, p, ul, ol, dl, li {            margin: 0;        }        blockquote, table, pre, code {            margin: 8px 0;        }        ul, ol {            padding-left: 32px;            padding-left: 2.13rem;        }        blockquote {            padding: 0 12px;            padding: 0 0.8rem;        }        blockquote > :first-child {            margin-top: 0;        }        blockquote > :last-child {            margin-bottom: 0;        }        img {            border: 0;            max-width: 100%;            height: auto !important;            margin: 2px 0;        }        table {            border-collapse: collapse;            border: 1px solid #bbbbbb;        }        td, th {            padding: 4px 8px;            border-collapse: collapse;            border: 1px solid #bbbbbb;			        }        @media only screen and (-webkit-max-device-width: 1024px), only screen and (-o-max-device-width: 1024px), only screen and (max-device-width: 1024px), only screen and (-webkit-min-device-pixel-ratio: 3), only screen and (-o-min-device-pixel-ratio: 3), only screen and (min-device-pixel-ratio: 3) {            html, body {                font-size: 17px;            }            body {                line-height: 1.7;                padding: 0.75rem 0.9375rem;                color: #353c47;            }            h1 {                font-size: 2.125rem;            }            h2 {                font-size: 1.875rem;            }            h3 {                font-size: 1.625rem;            }            h4 {                font-size: 1.375rem;            }            h5 {                font-size: 1.125rem;            }            h6 {                color: inherit;            }            ul, ol {                padding-left: 2.5rem;            }            blockquote {                padding: 0 0.9375rem;            }        }</style><link rel="stylesheet"  name="wiz_tmp_editor_style" href="Vue-resoucre_files/fonts_32.css"></head>

<body spellcheck="false" ><a href="https://github.com/pagekit/vue-resource/tree/master/docs">https://github.com/pagekit/vue-resource/tree/master/docs</a>&nbsp; &nbsp; github上的Vue-resoucre教程<div><br></div><div><a href="http://www.doc00.com/user/100007">http://www.doc00.com/user/100007</a>&nbsp; &nbsp;今日文摘 <br></div><div><br></div><div><br></div><div><span class="ico ico_type_Repost" style="display: inline-block; vertical-align: middle; width: 19px; height: 19px; margin-right: 10px; font-family: 'microsoft yahei'; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-image: url(&quot;&quot;); background-color: rgb(255, 255, 255); background-position: -50px 0px; background-repeat: no-repeat;"></span><span style="font-family: 'microsoft yahei'; font-size: 12px; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);">&nbsp;</span><h1 style="margin-top: 0px; margin-bottom: 0px; display: inline-block; vertical-align: middle; font-size: 18px; font-family: 'microsoft yahei'; font-variant-ligatures: normal; orphans: 2; widows: 2; background-color: rgb(255, 255, 255);"><span class="link_title"><a href="http://blog.csdn.net/qq_24122593/article/details/52954726" style="text-decoration: none; color: rgb(0, 0, 0);">Vue.js vue-resoucre的使用与解析 全攻略</a></span></h1><a href="http://blog.csdn.net/qq_24122593/article/details/52954726" style="font-family: 'microsoft yahei'; font-size: 18px; font-weight: bold; orphans: 2; widows: 2; line-height: 1.6; text-decoration: none; color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);"></a></div><div><br></div><div><br><div><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">本文的主要内容如下：</p><ul style="font-variant-ligatures: normal; orphans: 2; widows: 2; list-style: none; padding: 0px; margin-left: 20px; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><li style="list-style: none; padding: 0px;">介绍vue-resource的特点</li><li style="list-style: none; padding: 0px;">介绍vue-resource的基本使用方法</li><li style="list-style: none; padding: 0px;">基于this.$http的增删查改示例</li><li style="list-style: none; padding: 0px;">基于this.$resource的增删查改示例</li><li style="list-style: none; padding: 0px;">基于inteceptor实现请求等待时的loading画面</li><li style="list-style: none; padding: 0px;">基于inteceptor实现请求错误时的提示画面</li></ul><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
本文11个示例的源码已放到GitHub，如果您觉得本篇内容不错，请点个赞，或在GitHub上加个星星！</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>GitHub Source</strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
本文的所有示例如下：</p><ul style="font-variant-ligatures: normal; orphans: 2; widows: 2; list-style: none; padding: 0px; margin-left: 20px; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><li style="list-style: none; padding: 0px;"><strong>http get示例</strong></li><li style="list-style: none; padding: 0px;"><strong>http jsonp示例</strong></li><li style="list-style: none; padding: 0px;"><strong>http post示例</strong></li><li style="list-style: none; padding: 0px;"><strong>http put示例</strong></li><li style="list-style: none; padding: 0px;"><strong>http delete示例</strong></li><li style="list-style: none; padding: 0px;"><strong>resource get示例</strong></li><li style="list-style: none; padding: 0px;"><strong>resource save示例(HTTP POST)</strong></li><li style="list-style: none; padding: 0px;"><strong>resource update示例(HTTP PUT)</strong></li><li style="list-style: none; padding: 0px;"><strong>resource remove示例(HTTP DELETE)</strong></li><li style="list-style: none; padding: 0px;"><strong>inteceptor示例1——ajax请求的loading界面</strong></li><li style="list-style: none; padding: 0px;"><strong>inteceptor实例2——请求失败时的提示对话框</strong></li></ul><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
各位在阅读这篇文章的内容时，可以先尝试该列表的最后两个示例，这两个示例综合使用了this.$http和inteceptor。</p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t0" style="color: rgb(12, 137, 207);"></a>
vue-resource特点</h1><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
vue-resource插件具有以下特点：</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>1. 体积小</strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
vue-resource非常小巧，在压缩以后只有大约12KB，服务端启用gzip压缩后只有4.5KB大小，这远比<a href="http://lib.csdn.net/base/jquery" class="replace_word" title="jQuery知识库" target="_blank" style="text-decoration: none; color: rgb(223, 52, 52); font-weight: bold;">jQuery</a>的体积要小得多。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>2. 支持主流的浏览器</strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
和Vue.js一样，vue-resource除了不支持IE 9以下的浏览器，其他主流的浏览器都支持。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>3. 支持<strong>Promise</strong> API和<strong>URI Templates</strong></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
Promise是ES6的特性，Promise的中文含义为“先知”，Promise对象用于异步计算。<br>
URI Templates表示URI模板，有些类似于ASP<a href="http://lib.csdn.net/base/dotnet" class="replace_word" title=".NET知识库" target="_blank" style="text-decoration: none; color: rgb(223, 52, 52); font-weight: bold;">.NET</a> MVC的路由模板。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>4. 支持拦截器</strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
拦截器是全局的，拦截器可以在请求发送前和发送请求后做一些处理。<br>
拦截器在一些场景下会非常有用，比如请求发送前在headers中设置access_token，或者在请求失败时，提供共通的处理方式。</p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t1" style="color: rgb(12, 137, 207);"></a>
vue-resource使用</h1><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t2" style="color: rgb(12, 137, 207);"></a>
引入vue-resource</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">&lt;script src="js/vue.js"&gt;&lt;/script&gt;
&lt;script src="js/vue-resource.js"&gt;&lt;/script&gt;
</pre><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t3" style="color: rgb(12, 137, 207);"></a>
基本语法</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
引入vue-resource后，可以基于全局的Vue对象使用http，也可以基于某个Vue实例使用http。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">// 基于全局Vue对象使用http
Vue.http.get('/someUrl', [options]).then(successCallback, errorCallback);
Vue.http.post('/someUrl', [body], [options]).then(successCallback, errorCallback);

// 在一个Vue实例内使用$http
this.$http.get('/someUrl', [options]).then(successCallback, errorCallback);
this.$http.post('/someUrl', [body], [options]).then(successCallback, errorCallback);</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
在发送请求后，使用<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">then</code>方法来处理响应结果，<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">then</code>方法有两个参数，第一个参数是响应成功时的回调函数，第二个参数是响应失败时的回调函数。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">then</code>方法的回调函数也有两种写法，第一种是传统的函数写法，第二种是更为简洁的ES 6的Lambda写法：</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">// 传统写法
this.$http.get('/someUrl', [options]).then(function(response){
	// 响应成功回调
}, function(response){
	// 响应错误回调
});


// Lambda写法
this.$http.get('/someUrl', [options]).then((response) =&gt; {
	// 响应成功回调
}, (response) =&gt; {
	// 响应错误回调
});

</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
PS：做过.NET开发的人想必对Lambda写法有一种熟悉的感觉。</p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t4" style="color: rgb(12, 137, 207);"></a>
支持的HTTP方法</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
vue-resource的请求API是按照REST风格设计的，它提供了7种请求API：</p><ul style="font-variant-ligatures: normal; orphans: 2; widows: 2; list-style: none; padding: 0px; margin-left: 20px; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">get(url, [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">head(url, [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">delete(url, [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">jsonp(url, [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">post(url, [body], [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">put(url, [body], [options])</code></li><li style="list-style: none; padding: 0px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">patch(url, [body], [options])</code></li></ul><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
除了jsonp以外，另外6种的API名称是标准的HTTP方法。当服务端使用REST API时，客户端的编码风格和服务端的编码风格近乎一致，这可以减少前端和后端开发人员的沟通成本。</p><table style="font-variant-ligatures: normal; orphans: 2; widows: 2; border-spacing: 0px; margin-bottom: 10px; border-color: rgb(221, 221, 221); word-break: break-word; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background: rgb(250, 250, 250);"><thead><tr><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
客户端请求方法</th><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
服务端处理方法</th></tr></thead><tbody><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
this.$http.get(...)</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
Getxxx</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
this.$http.post(...)</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
Postxxx</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
this.$http.put(...)</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
Putxxx</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
this.$http.delete(...)</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
Deletexxx</td></tr></tbody></table><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t5" style="color: rgb(12, 137, 207);"></a>
options对象</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
发送请求时的options选项对象包含以下属性：</p><table style="font-variant-ligatures: normal; orphans: 2; widows: 2; border-spacing: 0px; margin-bottom: 10px; border-color: rgb(221, 221, 221); word-break: break-word; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background: rgb(250, 250, 250);"><thead><tr><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
参数</th><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
类型</th><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
描述</th></tr></thead><tbody><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
url</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">string</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
请求的URL</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
method</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">string</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
请求的HTTP方法，例如：'GET', 'POST'或其他HTTP方法</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
body</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Object</code>,<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">FormData</code><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">string</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
request body</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
params</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Object</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
请求的URL参数对象</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
headers</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Object</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
request header</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
timeout</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">number</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
单位为毫秒的请求超时时间 (<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">0</code> 表示无超时时间)</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
before</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">function(request)</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
请求发送前的处理函数，类似于jQuery的beforeSend函数</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
progress</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">function(event)</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><strong>ProgressEvent</strong>回调处理函数</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
credientials</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">boolean</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
表示跨域请求时是否需要使用凭证</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
emulateHTTP</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">boolean</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
发送PUT, PATCH, DELETE请求时以HTTP POST的方式发送，并设置请求头的<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">X-HTTP-Method-Override</code></td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
emulateJSON</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">boolean</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
将request body以<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">application/x-www-form-urlencoded</code> content type发送</td></tr></tbody></table><h3 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t6" style="color: rgb(12, 137, 207);"></a>
emulateHTTP的作用</h3><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
如果Web服务器无法处理PUT, PATCH和DELETE这种REST风格的请求，你可以启用enulateHTTP现象。启用该选项后，请求会以普通的POST方法发出，并且HTTP头信息的<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">X-HTTP-Method-Override</code>属性会设置为实际的HTTP方法。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.options.emulateHTTP = true;</pre><h3 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t7" style="color: rgb(12, 137, 207);"></a>
emulateJSON的作用</h3><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
如果Web服务器无法处理编码为application/json的请求，你可以启用emulateJSON选项。启用该选项后，请求会以<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">application/x-www-form-urlencoded</code>作为MIME type，就像普通的HTML表单一样。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.options.emulateJSON = true;</pre><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t8" style="color: rgb(12, 137, 207);"></a>
response对象</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
response对象包含以下属性：</p><table style="font-variant-ligatures: normal; orphans: 2; widows: 2; border-spacing: 0px; margin-bottom: 10px; border-color: rgb(221, 221, 221); word-break: break-word; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background: rgb(250, 250, 250);"><thead><tr><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
方法</th><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
类型</th><th style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px; background: rgb(239, 239, 239);">
描述</th></tr></thead><tbody><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
text()</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">string</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
以string形式返回response body</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
json()</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Object</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
以JSON对象形式返回response body</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
blob()</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Blob</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
以二进制形式返回response body</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><strong>属性</strong></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><strong>类型</strong></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><strong>描述</strong></td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
ok</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">boolean</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
响应的HTTP状态码在200~299之间时，该属性为true</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
status</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">number</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
响应的HTTP状态码</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
statusText</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">string</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
响应的状态文本</td></tr><tr><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
headers</td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Object</code></td><td style="padding: 5px; border-color: rgb(221, 221, 221); font-size: 13px;">
响应头</td></tr></tbody></table><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
注意：本文的vue-resource版本为v0.9.3，如果你使用的是v0.9.0以前的版本，response对象是没有json(), blob(), text()这些方法的。</p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t9" style="color: rgb(12, 137, 207);"></a>
CURD示例</h1><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
提示：以下示例仍然沿用上一篇的组件和WebAPI，组件的代码和页面HTML代码我就不再贴出来了。</p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t10" style="color: rgb(12, 137, 207);"></a>
GET请求</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">var demo = new Vue({
	el: '#app',
	data: {
		gridColumns: ['customerId', 'companyName', 'contactName', 'phone'],
		gridData: [],
		apiUrl: 'http://211.149.193.19:8080/api/customers'
	},
	ready: function() {
		this.getCustomers()
	},
	methods: {
		getCustomers: function() {
			this.$http.get(this.apiUrl)
				.then((response) =&gt; {
					this.$set('gridData', response.data)
				})
				.catch(function(response) {
					console.log(response)
				})
		}
	}
})
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
这段程序的then方法只提供了successCallback，而省略了errorCallback。<br>
catch方法用于捕捉程序的异常，catch方法和errorCallback是不同的，errorCallback只在响应失败时调用，而catch则是在整个请求到响应过程中，只要程序出错了就会被调用。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
在then方法的回调函数内，你也可以直接使用this，this仍然是指向Vue实例的：<br></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">getCustomers: function() {
	this.$http.get(this.apiUrl)
		.then((response) =&gt; {
			this.$set('gridData', response.data)
		})
		.catch(function(response) {
			console.log(response)
		})
}</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>为了减少作用域链的搜索，建议使用一个局部变量来接收this。</strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="image" border="0" alt="image" src="Vue-resoucre_files/0.34221216291189194.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t11" style="color: rgb(12, 137, 207);"></a>
JSONP请求</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">getCustomers: function() {
	this.$http.jsonp(this.apiUrl).then(function(response){
		this.$set('gridData', response.data)
	})
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t12" style="color: rgb(12, 137, 207);"></a>
POST请求</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">var demo = new Vue({
	el: '#app',
	data: {
		show: false,
		gridColumns: [{
			name: 'customerId',
			isKey: true
		}, {
			name: 'companyName'
		}, {
			name: 'contactName'
		}, {
			name: 'phone'
		}],
		gridData: [],
		apiUrl: 'http://211.149.193.19:8080/api/customers',
		item: {}
	},
	ready: function() {
		this.getCustomers()
	},
	methods: {
		closeDialog: function() {
			this.show = false
		},
		getCustomers: function() {
			var vm = this
			vm.$http.get(vm.apiUrl)
				.then((response) =&gt; {
					vm.$set('gridData', response.data)
				})
		},
		createCustomer: function() {
			var vm = this
			vm.$http.post(vm.apiUrl, vm.item)
				.then((response) =&gt; {
					vm.$set('item', {})
					vm.getCustomers()
				})
			this.show = false
		}
	}
})
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="29" alt="29" src="Vue-resoucre_files/0.29486158047802746.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t13" style="color: rgb(12, 137, 207);"></a>
PUT请求</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">updateCustomer: function() {
	var vm = this
	vm.$http.put(this.apiUrl + '/' + vm.item.customerId, vm.item)
		.then((response) =&gt; {
			vm.getCustomers()
		})
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="30" alt="30" src="Vue-resoucre_files/0.43509721430018544.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t14" style="color: rgb(12, 137, 207);"></a>
Delete请求</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">deleteCustomer: function(customer){
	var vm = this
	vm.$http.delete(this.apiUrl + '/' + customer.customerId)
		.then((response) =&gt; {
			vm.getCustomers()
		})
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="31" alt="31" src="Vue-resoucre_files/0.7378068724647164.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t15" style="color: rgb(12, 137, 207);"></a>
使用resource服务</h1><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
vue-resource提供了另外一种方式访问HTTP——resource服务，resource服务包含以下几种默认的action：</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">get: {method: 'GET'},
save: {method: 'POST'},
query: {method: 'GET'},
update: {method: 'PUT'},
remove: {method: 'DELETE'},
delete: {method: 'DELETE'}</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
resource对象也有两种访问方式：</p><ul style="font-variant-ligatures: normal; orphans: 2; widows: 2; list-style: none; padding: 0px; margin-left: 20px; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><li style="list-style: none; padding: 0px;">全局访问：<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">Vue.resource</code></li><li style="list-style: none; padding: 0px;">实例访问：<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">this.$resource</code></li></ul><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
resource可以结合URI Template一起使用，以下示例的apiUrl都设置为{/id}了：</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">apiUrl: 'http://211.149.193.19:8080/api/customers{/id}'</pre><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t16" style="color: rgb(12, 137, 207);"></a>
GET请求</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
使用get方法发送GET请求，下面这个请求没有指定<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{/id}</code>。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">getCustomers: function() {

	var resource = this.$resource(this.apiUrl)
		vm = this

	resource.get()
		.then((response) =&gt; {
			vm.$set('gridData', response.data)
		})
		.catch(function(response) {
			console.log(response)
		})
}</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t17" style="color: rgb(12, 137, 207);"></a>
POST请求</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
使用save方法发送POST请求，下面这个请求没有指定<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{/id}</code>。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">createCustomer: function() {
	var resource = this.$resource(this.apiUrl)
		vm = this

	resource.save(vm.apiUrl, vm.item)
		.then((response) =&gt; {
			vm.$set('item', {})
			vm.getCustomers()
		})
	this.show = false
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t18" style="color: rgb(12, 137, 207);"></a>
PUT请求</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
使用update方法发送PUT请求，下面这个请求指定了<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{/id}</code>。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">updateCustomer: function() {
	var resource = this.$resource(this.apiUrl)
		vm = this

	resource.update({ id: vm.item.customerId}, vm.item)
		.then((response) =&gt; {
			vm.getCustomers()
		})
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{/id}</code>相当于一个占位符，当传入实际的参数时该占位符会被替换。<br>
例如，<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{ id: vm.item.customerId}</code>中的vm.item.customerId为12，那么发送的请求URL为：</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">http://211.149.193.19:8080/api/customers/12</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t19" style="color: rgb(12, 137, 207);"></a>
DELETE请求</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
使用remove或delete方法发送DELETE请求，下面这个请求指定了<code style="color: rgb(0, 0, 0); font-family: &quot;Courier New&quot;, sans-serif !important;">{/id}</code>。</p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">deleteCustomer: function(customer){
	var resource = this.$resource(this.apiUrl)
		vm = this

	resource.remove({ id: customer.customerId})
		.then((response) =&gt; {
			vm.getCustomers()
		})
}
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t20" style="color: rgb(12, 137, 207);"></a>
使用inteceptor</h1><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
拦截器可以在请求发送前和发送请求后做一些处理。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="image" border="0" alt="image" src="Vue-resoucre_files/0.5269199355971068.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t21" style="color: rgb(12, 137, 207);"></a>
基本用法</h2><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.interceptors.push((request, next) =&gt; {
		// ...
		// 请求发送前的处理逻辑
		// ...
	next((response) =&gt; {
		// ...
		// 请求发送后的处理逻辑
		// ...
		// 根据请求的状态，response参数会返回给successCallback或errorCallback
		return response
	})
})
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
在response返回给successCallback或errorCallback之前，你可以修改response中的内容，或做一些处理。<br>
例如，响应的状态码如果是404，你可以显示友好的404界面。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
如果不想使用Lambda函数写法，可以用平民写法：</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.interceptors.push(function(request, next) {
	// ...
	// 请求发送前的处理逻辑
	// ...
	next(function(response) {
		// ...
		// 请求发送后的处理逻辑
		// ...
		// 根据请求的状态，response参数会返回给successCallback或errorCallback
		return response
	})
})
</pre><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t22" style="color: rgb(12, 137, 207);"></a>
示例1</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
之前的CURD示例有一处用户体验不太好，用户在使用一些功能的时候如果网络较慢，画面又没有给出反馈，用户是不知道他的操作是成功还是失败的，他也不知道是否该继续等待。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
通过inteceptor，我们可以为所有的请求处理加一个loading：请求发送前显示loading，接收响应后隐藏loading。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
具体步骤如下：</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>1.添加一个loading组件</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">&lt;template id="loading-template"&gt;
	&lt;div class="loading-overlay"&gt;
		&lt;div class="sk-three-bounce"&gt;
			&lt;div class="sk-child sk-bounce1"&gt;&lt;/div&gt;
			&lt;div class="sk-child sk-bounce2"&gt;&lt;/div&gt;
			&lt;div class="sk-child sk-bounce3"&gt;&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
&lt;/template&gt;
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>2.将loading组件作为另外一个Vue实例的子组件</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">var help = new Vue({
	el: '#help',
	data: {
		showLoading: false
	},
	components: {
		'loading': {
			template: '#loading-template',
		}
	}
})
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>3.将该Vue实例挂载到某个HTML元素</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">&lt;div id="help"&gt;
	&lt;loading v-show="showLoading"&gt;&lt;/loading&gt;
&lt;/div&gt;
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>4.添加inteceptor</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.interceptors.push((request, next) =&gt; {
	loading.show = true
	next((response) =&gt; {
		loading.show = false
		return response
	});
});
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="27" alt="27" src="Vue-resoucre_files/0.5075502919498831.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h2 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t23" style="color: rgb(12, 137, 207);"></a>
示例2</h2><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
当用户在画面上停留时间太久时，画面数据可能已经不是最新的了，这时如果用户删除或修改某一条数据，如果这条数据已经被其他用户删除了，服务器会反馈一个404的错误，但由于我们的put和delete请求没有处理errorCallback，所以用户是不知道他的操作是成功还是失败了。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
你问我为什么不在每个请求里面处理errorCallback，这是因为我比较懒。这个问题，同样也可以通过inteceptor解决。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>1. 继续沿用上面的loading组件，在#help元素下加一个对话框</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">&lt;div id="help"&gt;
	&lt;loading v-show="showLoading" &gt;&lt;/loading&gt;
	&lt;modal-dialog :show="showDialog"&gt;
		&lt;header class="dialog-header" slot="header"&gt;
			&lt;h1 class="dialog-title"&gt;Server Error&lt;/h1&gt;
		&lt;/header&gt;
		&lt;div class="dialog-body" slot="body"&gt;
			&lt;p class="error"&gt;Oops,server has got some errors, error code: {{errorCode}}.&lt;/p&gt;
		&lt;/div&gt;
	&lt;/modal-dialog&gt;
&lt;/div&gt;
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>2.给help实例的data选项添加两个属性</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">var help = new Vue({
		el: '#help',
		data: {
			showLoading: false,
			showDialog: false,
			errorCode: ''
		},
		components: {
			'loading': {
				template: '#loading-template',
			}
		}
	})
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>3.修改inteceptor</strong></p><pre style="white-space: pre-wrap; word-wrap: break-word; color: rgb(85, 85, 85); font-variant-ligatures: normal; orphans: 2; widows: 2; word-break: break-all; padding: 10px 15px; margin-top: 0px; margin-bottom: 0px; border-left-width: 4px; border-left-style: solid; border-left-color: rgb(153, 153, 153); font-size: 13px; max-width: 900px; font-family: 'Courier New', sans-serif !important; background: whitesmoke;">Vue.http.interceptors.push((request, next) =&gt; {
	help.showLoading = true
	next((response) =&gt; {
		if(!response.ok){
			help.errorCode = response.status
			help.showDialog = true
		}
		help.showLoading = false
		return response
	});
});
</pre><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong><img title="28" alt="28" src="Vue-resoucre_files/0.05225162277929485.png" style="border-style: none; border-width: initial; max-height: 100%; margin-top: 0px; margin-bottom: 0px; display: block;"></strong></p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);"><strong>View Demo</strong></p><h1 style="margin-top: 0px; margin-bottom: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><a name="t24" style="color: rgb(12, 137, 207);"></a>
总结</h1><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
vue-resource是一个非常轻量的用于处理HTTP请求的插件，它提供了两种方式来处理HTTP请求：</p><ul style="font-variant-ligatures: normal; orphans: 2; widows: 2; list-style: none; padding: 0px; margin-left: 20px; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; white-space: pre-wrap; background-color: rgb(255, 255, 255);"><li style="list-style: none; padding: 0px;">使用Vue.http或this.$http</li><li style="list-style: none; padding: 0px;">使用Vue.resource或this.$resource</li></ul><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
这两种方式本质上没有什么区别，阅读vue-resource的源码，你可以发现第2种方式是基于第1种方式实现的。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
inteceptor可以在请求前和请求后附加一些行为，这意味着除了请求处理的过程，请求的其他环节都可以由我们来控制。</p><p style="padding: 0px; font-variant-ligatures: normal; orphans: 2; widows: 2; line-height: 1.8; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; color: rgb(65, 74, 81); font-family: 'microsoft yahei', proxima-nova, 'Proxima Nova', 'Helvetica Neue', Helvetica, Arial, sans-serif; background-color: rgb(255, 255, 255);">
参考链接：<strong>https://github.com/vuejs/vue-resource/tree/master/docs</strong></p><br><div style="color:gray"><small>来源：&nbsp;<a href="http://blog.csdn.net/qq_24122593/article/details/52954726">http://blog.csdn.net/qq_24122593/article/details/52954726</a></small></div></div><div><br></div><div><br></div><div><br></div></div></body></html>